/*
 * Nextflow configuration file for Phosphorylation Pipeline
 * Portable across Linux and macOS systems
 */

// Global configuration
params {
    // Default parameters
    species_list = ['mouse', 'rat']
    outdir = "${projectDir}/results"
    
    // Python environment detection
    // Set to 'auto' to auto-detect, or specify 'venv' or 'conda'
    python_env = 'auto'
    
    // Path to Python executable (optional, auto-detected if not set)
    python_exec = null
}

// Process configuration
process {
    // Default resource requirements
    cpus = 1
    memory = '2 GB'
    time = '1h'
    
    // Error handling
    errorStrategy = 'retry'
    maxRetries = 3
    
    // Use relative paths for better portability
    publishDir = [
        path: "${params.outdir}",
        mode: 'copy',
        saveAs: { filename -> filename.equals('versions') ? null : filename }
    ]
}

// Executor configuration (works on both Linux and macOS)
executor {
    name = 'local'
    queueSize = 10
}

// Work directory (relative to project)
workDir = "${projectDir}/work"

// Report and trace files
report {
    enabled = true
    file = "${params.outdir}/pipeline_report.html"
}

timeline {
    enabled = true
    file = "${params.outdir}/pipeline_timeline.html"
}

trace {
    enabled = true
    file = "${params.outdir}/pipeline_trace.txt"
}

dag {
    enabled = true
    file = "${params.outdir}/pipeline_dag.svg"
}

// Environment variables
env {
    // Set project directory for scripts
    NF_PIPELINE_DIR = "${projectDir}"
    // Python path (will be set dynamically in processes)
    PYTHONUNBUFFERED = '1'
}

